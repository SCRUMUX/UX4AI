# Правила разработки для UX4AI

## Цвета и темы

### ❌ Запрещено

1. **Добавлять новые hex/rgb/hsl в UI/3D без привязки к токену**
   - Все цвета должны быть в `core/theme-colors.js` и задокументированы в `docs/COLOR_MAP.md`
   - Исключение: только `core/theme-colors.js` может содержать прямые цвета

2. **Создавать новые документы про цвета**
   - Единственный источник документации по цветам: `docs/COLOR_MAP.md`
   - Не создавайте `COLORS.md`, `THEME-COLORS.md`, `PALETTE.md` и т.п.

3. **Дублировать информацию о цветах в других файлах**
   - Используйте ссылки на `docs/COLOR_MAP.md` вместо копирования таблиц

### ✅ Разрешено

1. **Использовать прямые цвета только в `core/theme-colors.js`**
2. **Использовать токены везде** (`getThemeColors()`, `getSceneColors()`, CSS переменные)

### Процесс добавления нового цвета

1. Добавить в `docs/COLOR_MAP.md` (документация)
2. Добавить в `core/theme-colors.js` (реализация)
3. Добавить CSS-переменную в `styles/tokens.css` (если нужна для UI)
4. Использовать токен в коде

## Архитектура

### Владение элементами

- **`#theme-toggle-btn`** → HUD Manager (`core/hud-manager.js`)
- **`#tour-restart-btn`** → Bootstrap (`index.html`) + Tour (видимость)
- **`#btn-demo`, `#btn-links`, `#btn-about`** → Статическая верстка (`index.html`)
- **HUD-панели** → HUD Manager (`core/hud-manager.js`)
- **Тур** → Bootstrap (`index.html`)

**Правило:** Модули не должны изменять элементы, созданные другими модулями.

## Code Review Checklist

При code review проверяйте:

- [ ] Новые цвета добавлены в `docs/COLOR_MAP.md`
- [ ] Новые цвета добавлены в `core/theme-colors.js`
- [ ] CSS-переменные добавлены в `styles/tokens.css` (если нужны)
- [ ] Нет прямых hex/rgb/hsl в коде (кроме `theme-colors.js`)
- [ ] Документация синхронизирована с кодом
- [ ] Модули не изменяют элементы, созданные другими модулями

## Документация

### Единственные источники истины

- **Архитектура:** `docs/ARCHITECTURE.md`
- **Система тем:** `THEME-SYSTEM.md` + `docs/COLOR_MAP.md`
- **Настройка тем:** `THEME-CUSTOMIZATION-GUIDE.md`

**Правило:** Не создавайте новые документы, дублирующие существующие. Используйте ссылки.

